{"version":3,"sources":["meteor://ðŸ’»app/packages/ohif:core/main.js","meteor://ðŸ’»app/packages/ohif:core/server/index.js","meteor://ðŸ’»app/packages/ohif:core/server/mongo.js","meteor://ðŸ’»app/packages/ohif:core/both/index.js","meteor://ðŸ’»app/packages/ohif:core/both/schema.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/absoluteUrl.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/index.js","meteor://ðŸ’»app/packages/ohif:core/both/utils/objectPath.js"],"names":["module","export","OHIF","Meteor","watch","require","v","log","ui","utils","viewer","cornerstone","isClient","window","MongoUtils","validateUser","userId","Error","writeCallback","error","affected","SimpleSchema","extendOptions","valuesLabels","Match","Optional","String","textOptional","Boolean","addValidator","definition","optional","value","messages","maxCount","minCount","notAllowed","absoluteUrl","path","replace","ObjectPath","set","object","components","getPathComponents","length","result","isValidObject","i","last","currentObject","field","get","found","isValid","Object","split"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,OAAOC,MAAP,CAAc;AAACC,UAAK;AAAA,eAAIA,IAAJ;AAAA;AAAN,CAAd;AAA+B,IAAIC,eAAJ;AAAWH,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACF,UAAD,YAAQG,CAAR,EAAU;AAACH,iBAAOG,CAAP;AAAS;AAApB,CAAtC,EAA4D,CAA5D;AAE1C;;GAIA,IAAMJ,OAAO;AACTK,SAAK,EADI;AAETC,QAAI,EAFK;AAGTC,WAAO,EAHE;AAITC,YAAQ,EAJC;AAKTC,iBAAa;AALJ,CAAb,C,CAQA;AACA;;AACA,IAAIR,OAAOS,QAAX,EAAqB;AACjBC,WAAOX,IAAP,GAAcA,IAAd;AACH,qH;;;;;;;;;;;AClBDF,OAAOI,KAAP,CAAaC,QAAQ,YAAR,CAAb,kF;;;;;;;;;;;;;;;;;ACAA,IAAIH,aAAJ;AAASF,OAAOI,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACH,QAAD,YAAMI,CAAN,EAAQ;AAACJ,eAAKI,CAAL;AAAO;AAAhB,CAAzC,EAA2D,CAA3D;AAA8D,IAAIH,eAAJ;AAAWH,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb,EAAsC;AAACF,UAAD,YAAQG,CAAR,EAAU;AAACH,iBAAOG,CAAP;AAAS;AAApB,CAAtC,EAA4D,CAA5D;;AAGlF;IACMQ,U;;;;;AAEF;eACOC,Y;gCAAe;AAClB;AACA,gBAAI,CAACZ,OAAOa,MAAP,EAAL,EAAsB;AAClB,sBAAM,IAAIb,OAAOc,KAAX,CAAiB,gBAAjB,CAAN;AACH;AACJ;;;SAED;;;eACOC,a;+BAAcC,K,EAAOC,Q,EAAU;AAClC;AACA,gBAAID,KAAJ,EAAW;AACP,sBAAM,IAAIhB,OAAOc,KAAX,CAAiB,YAAjB,EAA+BE,KAA/B,CAAN;AACH;AACJ;;;;;;KAIL;;;AACAjB,KAAKY,UAAL,GAAkBA,UAAlB,yF;;;;;;;;;;;ACzBAd,OAAOI,KAAP,CAAaC,QAAQ,SAAR,CAAb;AAAiCL,OAAOI,KAAP,CAAaC,QAAQ,aAAR,CAAb,iF;;;;;;;;;;;ACAjC,IAAIgB,qBAAJ;AAAiBrB,OAAOI,KAAP,CAAaC,QAAQ,6BAAR,CAAb,EAAoD;AAACgB,gBAAD,YAAcf,CAAd,EAAgB;AAACe,uBAAaf,CAAb;AAAe;AAAhC,CAApD,EAAsF,CAAtF;AAEjB;;;;;;;;GASAe,aAAaC,aAAb,CAA2B;AACvBC,kBAAcC,MAAMC,QAAN,CAAe,CAACC,MAAD,CAAf,CADS;AAEvBC,kBAAcH,MAAMC,QAAN,CAAeG,OAAf;AAFS,CAA3B,E,CAKA;AACA;;AACAP,aAAaQ,YAAb,CAA0B,YAAW;AACjC,QACI,KAAKC,UAAL,CAAgBC,QAAhB,KAA6B,IAA7B,IACA,KAAKD,UAAL,CAAgBH,YAAhB,KAAiC,IADjC,IAEA,KAAKK,KAAL,KAAe,EAHnB,EAIE;AACE,eAAO,UAAP;AACH;AACJ,CARD,E,CAUA;;AACAX,aAAaY,QAAb,CAAsB;AAClBC,cAAU,kDADQ;AAElBC,cAAU,8CAFQ;AAGlBC,gBAAY;AAHM,CAAtB,oH;;;;;;;;;;;AC7BA,IAAIlC,aAAJ;AAASF,OAAOI,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACH,QAAD,YAAMI,CAAN,EAAQ;AAACJ,eAAKI,CAAL;AAAO;AAAhB,CAAzC,EAA2D,CAA3D;;AAET;AACAJ,KAAKO,KAAL,CAAW4B,WAAX,GAAyB,UAASC,IAAT,EAAe;AACpC,QAAIA,IAAJ,EAAU;AACN;AACAA,eAAOA,KAAKC,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;AACH;;AAED,WAAOpC,OAAOkC,WAAP,CAAmBC,IAAnB,CAAP;AACH,CAPD,oH;;;;;;;;;;;ACHAtC,OAAOI,KAAP,CAAaC,QAAQ,eAAR,CAAb;AAAuCL,OAAOI,KAAP,CAAaC,QAAQ,cAAR,CAAb,gF;;;;;;;;;;;;;;;;;;;;;ACAvC,IAAIH,aAAJ;AAASF,OAAOI,KAAP,CAAaC,QAAQ,kBAAR,CAAb,EAAyC;AAACH,QAAD,YAAMI,CAAN,EAAQ;AAACJ,eAAKI,CAAL;AAAO;AAAhB,CAAzC,EAA2D,CAA3D;;IAEHkC,U;;;;;AAEF;;;;;;;;kBASOC,G;qBAAIC,M,EAAQJ,I,EAAMN,K,EAAO;AAE5B,gBAAIW,aAAaH,WAAWI,iBAAX,CAA6BN,IAA7B,CAAjB;AAAA,gBACIO,SAASF,eAAe,IAAf,GAAsBA,WAAWE,MAAjC,GAA0C,CADvD;AAAA,gBAEIC,SAAS,KAFb;;AAIA,gBAAID,SAAS,CAAT,IAAcL,WAAWO,aAAX,CAAyBL,MAAzB,CAAlB,EAAoD;AAEhD,oBAAIM,IAAI,CAAR;AAAA,oBACIC,OAAOJ,SAAS,CADpB;AAAA,oBAEIK,gBAAgBR,MAFpB;;AAIA,uBAAOM,IAAIC,IAAX,EAAiB;AAEb,wBAAIE,QAAQR,WAAWK,CAAX,CAAZ;;AAEA,wBAAIG,SAASD,aAAb,EAA4B;AACxB,4BAAI,CAACV,WAAWO,aAAX,CAAyBG,cAAcC,KAAd,CAAzB,CAAL,EAAqD;AACjD;AACH;AACJ,qBAJD,MAIO;AACHD,sCAAcC,KAAd,IAAuB,EAAvB;AACH;;AAEDD,oCAAgBA,cAAcC,KAAd,CAAhB;AACAH;AAEH;;AAED,oBAAIA,MAAMC,IAAV,EAAgB;AACZC,kCAAcP,WAAWM,IAAX,CAAd,IAAkCjB,KAAlC;AACAc,6BAAS,IAAT;AACH;AAEJ;;AAED,mBAAOA,MAAP;AAEH;;;SAED;;;;;;;;eAOOM,G;qBAAIV,M,EAAQJ,I,EAAM;AAErB,gBAAIe,cAAJ;AAAA,gBAAW;AACPV,yBAAaH,WAAWI,iBAAX,CAA6BN,IAA7B,CADjB;AAAA,gBAEIO,SAASF,eAAe,IAAf,GAAsBA,WAAWE,MAAjC,GAA0C,CAFvD;;AAIA,gBAAIA,SAAS,CAAT,IAAcL,WAAWO,aAAX,CAAyBL,MAAzB,CAAlB,EAAoD;AAEhD,oBAAIM,IAAI,CAAR;AAAA,oBACIC,OAAOJ,SAAS,CADpB;AAAA,oBAEIK,gBAAgBR,MAFpB;;AAIA,uBAAOM,IAAIC,IAAX,EAAiB;AAEb,wBAAIE,QAAQR,WAAWK,CAAX,CAAZ;AAEA,wBAAMM,UAAUd,WAAWO,aAAX,CAAyBG,cAAcC,KAAd,CAAzB,CAAhB;;AACA,wBAAIA,SAASD,aAAT,IAA0BI,OAA9B,EAAuC;AACnCJ,wCAAgBA,cAAcC,KAAd,CAAhB;AACAH;AACH,qBAHD,MAGO;AACH;AACH;AAEJ;;AAED,oBAAIA,MAAMC,IAAN,IAAcN,WAAWM,IAAX,KAAoBC,aAAtC,EAAqD;AACjDG,4BAAQH,cAAcP,WAAWM,IAAX,CAAd,CAAR;AACH;AAEJ;;AAED,mBAAOI,KAAP;AAEH;;;SAED;;;;;;eAKON,a;+BAAcL,M,EAAQ;AACzB,mBACI,QAAOA,MAAP,uDAAOA,MAAP,OAAkB,QAAlB,IACAA,WAAW,IADX,IAEAA,kBAAkBa,MAHtB;AAKH;;;;;eAEMX,iB;mCAAkBN,I,EAAM;AAC3B,mBAAQ,OAAOA,IAAP,KAAgB,QAAhB,GAA2BA,KAAKkB,KAAL,CAAW,GAAX,CAA3B,GAA6C,IAArD;AACH;;;;;;;;AAILtD,KAAKO,KAAL,CAAW+B,UAAX,GAAwBA,UAAxB,oF","file":"/packages/ohif_core.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\n/*\n * Defines the base OHIF object\n */\n\nconst OHIF = {\n    log: {},\n    ui: {},\n    utils: {},\n    viewer: {},\n    cornerstone: {}\n};\n\n// Expose the OHIF object to the client if it is on development mode\n// @TODO: remove this after applying namespace to this package\nif (Meteor.isClient) {\n    window.OHIF = OHIF;\n}\n\nexport { OHIF };\n","import './mongo.js';\n","import { OHIF } from 'meteor/ohif:core';\nimport { Meteor } from 'meteor/meteor';\n\n// Mongo data manipulation utilities\nclass MongoUtils {\n\n    // Check if there is an user logged in\n    static validateUser() {\n        // Throw error if there is no user logged in\n        if (!Meteor.userId()) {\n            throw new Meteor.Error('not-authorized');\n        }\n    }\n\n    // Generic callback to MongoDB write operations\n    static writeCallback(error, affected) {\n        // Throw error if it was not possible to complete the write operation\n        if (error) {\n            throw new Meteor.Error('data-write', error);\n        }\n    }\n\n}\n\n// Expose the class in the OHIF object\nOHIF.MongoUtils = MongoUtils;\n","import './utils';\n\nimport './schema.js';\n","import { SimpleSchema } from 'meteor/aldeed:simple-schema';\n\n/*\n Extend the available options on schema definitions:\n\n  * valuesLabels: Used in conjunction with allowedValues to define the text\n    label for each value (used on forms)\n\n  * textOptional: Used to allow empty strings\n\n */\nSimpleSchema.extendOptions({\n    valuesLabels: Match.Optional([String]),\n    textOptional: Match.Optional(Boolean)\n});\n\n// Add default required validation for empty strings which can be bypassed\n// using textOptional=true definition\nSimpleSchema.addValidator(function() {\n    if (\n        this.definition.optional !== true &&\n        this.definition.textOptional !== true &&\n        this.value === ''\n    ) {\n        return 'required';\n    }\n});\n\n// Including [label] for some messages\nSimpleSchema.messages({\n    maxCount: '[label] can not have more than [maxCount] values',\n    minCount: '[label] must have at least [minCount] values',\n    notAllowed: '[label] has an invalid value: \"[value]\"'\n});\n","import { OHIF } from 'meteor/ohif:core';\n\n// Return an absolute URL with the given path by supporting the leading \"/\"\nOHIF.utils.absoluteUrl = function(path) {\n    if (path) {\n        // Remove the leading \"/\"\n        path = path.replace(/^\\//, '');\n    }\n\n    return Meteor.absoluteUrl(path);\n};","import './absoluteUrl';\nimport './objectPath';\n","import { OHIF } from 'meteor/ohif:core';\n\nclass ObjectPath {\n\n    /**\n     * Set an object property based on \"path\" (namespace) supplied creating\n     * ... intermediary objects if they do not exist.\n     * @param object {Object} An object where the properties specified on path should be set.\n     * @param path {String} A string representing the property to be set, e.g. \"user.study.series.timepoint\".\n     * @param value {Any} The value of the property that will be set.\n     * @return {Boolean} Returns \"true\" on success, \"false\" if any intermediate component of the supplied path\n     * ... is not a valid Object, in which case the property cannot be set. No excpetions are thrown.\n     */\n    static set(object, path, value) {\n\n        let components = ObjectPath.getPathComponents(path),\n            length = components !== null ? components.length : 0,\n            result = false;\n\n        if (length > 0 && ObjectPath.isValidObject(object)) {\n\n            let i = 0,\n                last = length - 1,\n                currentObject = object;\n\n            while (i < last) {\n\n                let field = components[i];\n\n                if (field in currentObject) {\n                    if (!ObjectPath.isValidObject(currentObject[field])) {\n                        break;\n                    }\n                } else {\n                    currentObject[field] = {};\n                }\n\n                currentObject = currentObject[field];\n                i++;\n\n            }\n\n            if (i === last) {\n                currentObject[components[last]] = value;\n                result = true;\n            }\n\n        }\n\n        return result;\n\n    }\n\n    /**\n     * Get an object property based on \"path\" (namespace) supplied traversing the object\n     * ... tree as necessary.\n     * @param object {Object} An object where the properties specified might exist.\n     * @param path {String} A string representing the property to be searched for, e.g. \"user.study.series.timepoint\".\n     * @return {Any} The value of the property if found. By default, returns the special type \"undefined\".\n     */\n    static get(object, path) {\n\n        let found, // undefined by default\n            components = ObjectPath.getPathComponents(path),\n            length = components !== null ? components.length : 0;\n\n        if (length > 0 && ObjectPath.isValidObject(object)) {\n\n            let i = 0,\n                last = length - 1,\n                currentObject = object;\n\n            while (i < last) {\n\n                let field = components[i];\n\n                const isValid = ObjectPath.isValidObject(currentObject[field]);\n                if (field in currentObject && isValid) {\n                    currentObject = currentObject[field];\n                    i++;\n                } else {\n                    break;\n                }\n\n            }\n\n            if (i === last && components[last] in currentObject) {\n                found = currentObject[components[last]];\n            }\n\n        }\n\n        return found;\n\n    }\n\n    /**\n     * Check if the supplied argument is a real JavaScript Object instance.\n     * @param object {Any} The subject to be tested.\n     * @return {Boolean} Returns \"true\" if the object is a real Object instance and \"false\" otherwise.\n     */\n    static isValidObject(object) {\n        return (\n            typeof object === 'object' &&\n            object !== null &&\n            object instanceof Object\n        );\n    }\n\n    static getPathComponents(path) {\n        return (typeof path === 'string' ? path.split('.') : null);\n    }\n\n}\n\nOHIF.utils.ObjectPath = ObjectPath;\n"]}