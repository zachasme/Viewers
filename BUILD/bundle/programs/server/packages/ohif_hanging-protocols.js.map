{"version":3,"sources":["meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/namespace.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/collections.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/schema.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/hardcodedData.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/testData.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Protocol.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Rule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Stage.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/Viewport.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/ViewportStructure.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/ImageMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/ProtocolMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/SeriesMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/classes/rules/StudyMatchingRule.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/lib/comparators.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/both/lib/removeFromArray.js","meteor://ðŸ’»app/packages/ohif:hanging-protocols/server/collections.js"],"names":["HP","HangingProtocols","Meteor","Collection","_debugName","allow","insert","update","remove","isDevelopment","isServer","startup","module","watch","require","attributeDefaults","abstractPriorValue","displaySettings","invert","id","text","defaultValue","options","studyAttributes","protocolAttributes","seriesAttributes","instanceAttributes","getDefaultProtocol","protocol","Protocol","locked","oneByOne","ViewportStructure","rows","columns","viewport","Viewport","first","Stage","viewports","push","stages","defaultProtocol","getMRTwoByTwoTest","proto","studyInstanceUid","ProtocolMatchingRule","equals","value","addProtocolMatchingRule","oneByTwo","left","right","firstSeries","SeriesMatchingRule","secondSeries","thirdImage","ImageMatchingRule","seriesMatchingRules","imageMatchingRules","twoByOne","left2","right2","fourthSeries","fifthSeries","second","testProtocol","getDemoProtocols","demoProtocols","v","Random","removeFromArray","name","hasUpdatedPriorsInformation","createdDate","Date","modifiedDate","users","userId","createdBy","modifiedBy","availableTo","Set","editableBy","protocolMatchingRules","numberOfPriorsReferenced","getNumberOfPriorsReferenced","skipCache","forEach","stage","studyMatchingRules","priorsReferenced","rule","updateNumberOfPriorsReferenced","protocolWasModified","fromObject","input","ruleObject","stageObject","createClone","currentProtocol","Object","assign","clonedProtocol","addStage","removeProtocolMatchingRule","wasRemoved","export","Rule","comparators","EQUALS_REGEXP","attribute","constraint","required","weight","undefined","_constraintInfo","_validatorAndValue","getConstraintInfo","constraintInfo","ruleConstraint","keys","find","comparator","isRuleForPrior","ruleValidatorAndValue","getConstraintValidatorAndValue","validator","intValue","parseInt","test","validatorAndValue","currentValidator","constraintValidator","validatorOption","constraintValue","viewportStructure","currentStage","clonedStage","viewportObject","viewportSettings","StudyMatchingRule","removeRule","array","type","properties","getLayoutTemplateName","getNumViewports","description","freeze","_","length","index","isEqual","indexToRemove","splice","publish"],"mappings":"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","file":"/packages/ohif_hanging-protocols.js","sourcesContent":["HP = {};\n","HangingProtocols = new Meteor.Collection('hangingprotocols');\nHangingProtocols._debugName = 'HangingProtocols';\n\nHangingProtocols.allow({\n    insert: function() {\n        return true;\n    },\n    update: function() {\n        return true;\n    },\n    remove: function() {\n        return true;\n    }\n});\n\n// @TODO: Remove this after stabilizing ProtocolEngine\nif (Meteor.isDevelopment && Meteor.isServer) {\n    Meteor.startup(() => {\n        HangingProtocols.remove({});\n    });\n}\n","// @TODO start using namespace instead\n\n// Base classes\nimport './classes/Protocol';\nimport './classes/Stage';\nimport './classes/Viewport';\nimport './classes/ViewportStructure';\n\n// Specialized Rule classes\nimport './classes/rules/ProtocolMatchingRule';\nimport './classes/rules/StudyMatchingRule';\nimport './classes/rules/SeriesMatchingRule';\nimport './classes/rules/ImageMatchingRule';\n","HP.attributeDefaults = {\n    abstractPriorValue: 0\n};\n\nHP.displaySettings = {\n    invert: {\n        id: 'invert',\n        text: 'Show Grayscale Inverted',\n        defaultValue: 'NO',\n        options: ['YES', 'NO']\n    }\n};\n\n// @TODO Fix abstractPriorValue comparison\nHP.studyAttributes = [{\n    id: 'x00100020',\n    text: '(x00100020) Patient ID'\n}, {\n    id: 'x0020000d',\n    text: '(x0020000d) Study Instance UID'\n}, {\n    id: 'x00080020',\n    text: '(x00080020) Study Date'\n}, {\n    id: 'x00080030',\n    text: '(x00080030) Study Time'\n}, {\n    id: 'x00081030',\n    text: '(x00081030) Study Description'\n}, {\n    id: 'abstractPriorValue',\n    text: 'Abstract Prior Value'\n}];\n\nHP.protocolAttributes = [{\n    id: 'x00100020',\n    text: '(x00100020) Patient ID'\n}, {\n    id: 'x0020000d',\n    text: '(x0020000d) Study Instance UID'\n}, {\n    id: 'x00080020',\n    text: '(x00080020) Study Date'\n}, {\n    id: 'x00080030',\n    text: '(x00080030) Study Time'\n}, {\n    id: 'x00081030',\n    text: '(x00081030) Study Description'\n}, {\n    id: 'anatomicRegion',\n    text: 'Anatomic Region'\n}];\n\nHP.seriesAttributes = [{\n    id: 'x0020000e',\n    text: '(x0020000e) Series Instance UID'\n}, {\n    id: 'x00080060',\n    text: '(x00080060) Modality'\n}, {\n    id: 'x00200011',\n    text: '(x00200011) Series Number'\n}, {\n    id: 'x0008103e',\n    text: '(x0008103e) Series Description'\n}, {\n    id: 'numImages',\n    text: 'Number of Images'\n}];\n\nHP.instanceAttributes = [{\n    id: 'x00080016',\n    text: '(x00080016) SOP Class UID'\n}, {\n    id: 'x00080018',\n    text: '(x00080018) SOP Instance UID'\n}, {\n    id: 'x00185101',\n    text: '(x00185101) View Position'\n}, {\n    id: 'x00200013',\n    text: '(x00200013) Instance Number'\n}, {\n    id: 'x00080008',\n    text: '(x00080008) Image Type'\n}, {\n    id: 'x00181063',\n    text: '(x00181063) Frame Time'\n}, {\n    id: 'x00200060',\n    text: '(x00200060) Laterality'\n}, {\n    id: 'x00541330',\n    text: '(x00541330) Image Index'\n}, {\n    id: 'x00280004',\n    text: '(x00280004) Photometric Interpretation'\n}, {\n    id: 'x00180050',\n    text: '(x00180050) Slice Thickness'\n}];\n","function getDefaultProtocol() {\n    var protocol = new HP.Protocol('Default');\n    protocol.id = 'defaultProtocol';\n    protocol.locked = true;\n\n    var oneByOne = new HP.ViewportStructure('grid', {\n        rows: 1,\n        columns: 1\n    });\n\n    var viewport = new HP.Viewport();\n    var first = new HP.Stage(oneByOne, 'oneByOne');\n    first.viewports.push(viewport);\n\n    protocol.stages.push(first);\n\n    HP.defaultProtocol = protocol;\n    return HP.defaultProtocol;\n}\n\nfunction getMRTwoByTwoTest() {\n    var proto = new HP.Protocol('MR_TwoByTwo');\n    proto.id = 'MR_TwoByTwo';\n    proto.locked = true;\n    // Use http://localhost:3000/viewer/1.2.840.113619.2.5.1762583153.215519.978957063.78\n\n    var studyInstanceUid = new HP.ProtocolMatchingRule('studyInstanceUid', {\n        equals: {\n            value: '1.2.840.113619.2.5.1762583153.215519.978957063.78'\n        }\n    }, true);\n\n    proto.addProtocolMatchingRule(studyInstanceUid);\n\n    var oneByTwo = new HP.ViewportStructure('grid', {\n        rows: 1,\n        columns: 2\n    });\n\n    // Stage 1\n    var left = new HP.Viewport();\n    var right = new HP.Viewport();\n\n    var firstSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 1\n        }\n    });\n\n    var secondSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 2\n        }\n    });\n\n    var thirdImage = new HP.ImageMatchingRule('instanceNumber', {\n        equals: {\n            value: 3\n        }\n    });\n\n    left.seriesMatchingRules.push(firstSeries);\n    left.imageMatchingRules.push(thirdImage);\n\n    right.seriesMatchingRules.push(secondSeries);\n    right.imageMatchingRules.push(thirdImage);\n\n    var first = new HP.Stage(oneByTwo, 'oneByTwo');\n    first.viewports.push(left);\n    first.viewports.push(right);\n\n    proto.stages.push(first);\n\n    // Stage 2\n    var twoByOne = new HP.ViewportStructure('grid', {\n        rows: 2,\n        columns: 1\n    });\n    var left2 = new HP.Viewport();\n    var right2 = new HP.Viewport();\n\n    var fourthSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 4\n        }\n    });\n\n    var fifthSeries = new HP.SeriesMatchingRule('seriesNumber', {\n        equals: {\n            value: 5\n        }\n    });\n\n    left2.seriesMatchingRules.push(fourthSeries);\n    left2.imageMatchingRules.push(thirdImage);\n    right2.seriesMatchingRules.push(fifthSeries);\n    right2.imageMatchingRules.push(thirdImage);\n\n    var second = new HP.Stage(twoByOne, 'twoByOne');\n    second.viewports.push(left2);\n    second.viewports.push(right2);\n\n    proto.stages.push(second);\n\n    HP.testProtocol = proto;\n    return HP.testProtocol;\n}\n\nfunction getDemoProtocols() {\n\n    HP.demoProtocols = [];\n\n    /**\n     * Demo #1\n     */\n    HP.demoProtocols.push({\n        \"id\": \"demoProtocol1\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-COMPARE\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [\n            {\n                \"id\": \"7tmuq7KzDMCWFeapc\",\n                \"weight\": 2,\n                \"required\": false,\n                \"attribute\": \"x00081030\",\n                \"constraint\": {\n                    \"contains\": {\n                        \"value\": \"DFCI CT CHEST\"\n                    }\n                }\n            }\n        ],\n        \"stages\": [\n            {\n                \"id\": \"v5PfGt9F6mffZPif5\",\n                \"name\": \"oneByOne\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 1,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"2.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"2.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"uDoEgLTvnXTByWnPz\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n            },\n            {\n                \"id\": \"XTzu8HB3feep3HYKs\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 1,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"uDoEgLTvnXTByWnPz\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:07:12.085Z\"\n            },\n            {\n                \"id\": \"3yPYNaeFtr76Qz3jq\",\n                \"viewportStructure\": {\n                    \"type\": \"grid\",\n                    \"properties\": {\n                        \"rows\": 2,\n                        \"columns\": 2\n                    },\n                    \"layoutTemplateName\": \"gridLayout\"\n                },\n                \"viewports\": [\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"mXnsCcNzZL56z7mTZ\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Body 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {\n                            \"wlPreset\": \"Lung\"\n                        },\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"ygz4nb28iJZcJhnYa\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Lung 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": []\n                    },\n                    {\n                        \"viewportSettings\": {},\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"6vdBRZYnqmmosipph\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Body 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"SxfTyhGcMhr56PtPM\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    },\n                    {\n                        \"viewportSettings\": {\n                            \"wlPreset\": \"Lung\"\n                        },\n                        \"imageMatchingRules\": [],\n                        \"seriesMatchingRules\": [\n                            {\n                                \"id\": \"FTAyChZCPW68yJjXD\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"x0008103e\",\n                                \"constraint\": {\n                                    \"contains\": {\n                                        \"value\": \"Lung 3.0\"\n                                    }\n                                }\n                            }\n                        ],\n                        \"studyMatchingRules\": [\n                            {\n                                \"id\": \"gMJjfrbsqYNbErPx5\",\n                                \"weight\": 1,\n                                \"required\": false,\n                                \"attribute\": \"abstractPriorValue\",\n                                \"constraint\": {\n                                    \"equals\": {\n                                        \"value\": 1\n                                    }\n                                }\n                            }\n                        ]\n                    }\n                ],\n                \"createdDate\": \"2017-02-14T16:11:40.489Z\"\n            }\n        ],\n        \"numberOfPriorsReferenced\": 4\n    });\n\n    /**\n     * Demo #2\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"demoProtocol2\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-COMPARE-2\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuq7KzDMCWFeapc\",\n            \"weight\": 2,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"DFCI CT CHEST\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mac\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYc\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnXTByWnPt\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"XTzu8HB3feep3HYKs\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mYnsCcNwZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"ygz4nb29iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:12.085Z\"\n        }, {\n            \"id\": \"3yPYNaeFtr76Qz3jq\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7mtr\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"jXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {\n                    \"wlPreset\": \"Lung\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"ygz4nb28iJZcJhnYb\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"ycz4nb28iJZcJhnYa\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"6vdBRZYnqmmosipph\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"6vdBRFYnqmmosipph\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"SxfTyhGcMhr56PtPM\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {\n                    \"wlPreset\": \"Lung\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"FTAyChZCPW68yJjXD\",\n                    \"weight\": 2,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"DTAyChZCPW68yJjXD\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"gMJjfrbsqYNbErPx5\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:11:40.489Z\"\n        }],\n        \"numberOfPriorsReferenced\": 1\n    });\n\n    /**\n     * Demo: screenCT\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"screenCT\",\n        \"locked\": false,\n        \"name\": \"DFCI-CT-CHEST-SCREEN\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuq7KzDMCWFeapc\",\n            \"weight\": 2,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"DFCI CT CHEST\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 1\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL55z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"2.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        },\n        {\n            \"id\": \"v5PfGt9F4mffZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7nTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 5.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7rTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 3.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56r7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 5.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56a7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Lung 3.0\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcRzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 4.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzTL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Coronal\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcMzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Body 4.0\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcAzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Sagittal\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 0\n    });\n\n    /**\n     * Demo: PETCTSCREEN\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"PETCTSCREEN\",\n        \"locked\": false,\n        \"name\": \"PETCT-SCREEN\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuqgKzDMCWFeapc\",\n            \"weight\": 5,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"PETCT\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcAzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZR56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mRnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsGcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsHcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXneCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCuNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 0\n    });\n\n    /**\n     * Demo: PETCTCOMPARE\n     */\n\n    HP.demoProtocols.push({\n        \"id\": \"PETCTCOMPARE\",\n        \"locked\": false,\n        \"name\": \"PETCT-COMPARE\",\n        \"createdDate\": \"2017-02-14T16:07:09.033Z\",\n        \"modifiedDate\": \"2017-02-14T16:18:43.930Z\",\n        \"availableTo\": {},\n        \"editableBy\": {},\n        \"protocolMatchingRules\": [{\n            \"id\": \"7tmuqgKzDMCWFeapc\",\n            \"weight\": 5,\n            \"required\": false,\n            \"attribute\": \"x00081030\",\n            \"constraint\": {\n                \"contains\": {\n                    \"value\": \"PETCT\"\n                }\n            }\n        }],\n        \"stages\": [{\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL59z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7lTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTbnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 1,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNjZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7gTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcCzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"Topogram\"\n                        }\n                    }\n                }, {\n                    \"id\": \"mXnsCcNzZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x00200011\",\n                    \"constraint\": {\n                        \"numericality\": {\n                            \"greaterThanOrEqualTo\": 2\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvn1TByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL26z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL46z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL57z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Corrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnYTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZQ56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT WB\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgLTvnKTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }, {\n            \"id\": \"v5PfGt9F6mFgZPif5\",\n            \"name\": \"oneByOne\",\n            \"viewportStructure\": {\n                \"type\": \"grid\",\n                \"properties\": {\n                    \"rows\": 2,\n                    \"columns\": 2\n                },\n                \"layoutTemplateName\": \"gridLayout\"\n            },\n            \"viewports\": [{\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZL56z7nTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNxZL56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": []\n            }, {\n                \"viewportSettings\": {\n                    \"invert\": \"YES\"\n                },\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZA56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"PET WB Uncorrected\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgHTvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }, {\n                \"viewportSettings\": {},\n                \"imageMatchingRules\": [],\n                \"seriesMatchingRules\": [{\n                    \"id\": \"mXnsCcNzZP56z7mTZ\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"x0008103e\",\n                    \"constraint\": {\n                        \"contains\": {\n                            \"value\": \"CT Nk\"\n                        }\n                    }\n                }],\n                \"studyMatchingRules\": [{\n                    \"id\": \"uDoEgITvnXTByWnPz\",\n                    \"weight\": 1,\n                    \"required\": false,\n                    \"attribute\": \"abstractPriorValue\",\n                    \"constraint\": {\n                        \"equals\": {\n                            \"value\": 1\n                        }\n                    }\n                }]\n            }],\n            \"createdDate\": \"2017-02-14T16:07:09.033Z\"\n        }],\n        \"numberOfPriorsReferenced\": 1\n    });\n\n}\n\ngetDefaultProtocol();\n//getMRTwoByTwoTest();\n//getDemoProtocols();\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\n\n// Local imports\nimport { removeFromArray } from '../lib/removeFromArray';\n\n/**\n * This class represents a Hanging Protocol at the highest level\n *\n * @type {Protocol}\n */\nHP.Protocol = class Protocol {\n    /**\n     * The Constructor for the Class to create a Protocol with the bare\n     * minimum information\n     *\n     * @param name The desired name for the Protocol\n     */\n    constructor(name) {\n        // Create a new UUID for this Protocol\n        this.id = Random.id();\n\n        // Store a value which determines whether or not a Protocol is locked\n        // This is probably temporary, since we will eventually have role / user\n        // checks for editing. For now we just need it to prevent changes to the\n        // default protocols.\n        this.locked = false;\n\n        // Boolean value to indicate if the protocol has updated priors information\n        // it's set in \"updateNumberOfPriorsReferenced\" function\n        this.hasUpdatedPriorsInformation = false;\n\n        // Apply the desired name\n        this.name = name;\n\n        // Set the created and modified dates to Now\n        this.createdDate = new Date();\n        this.modifiedDate = new Date();\n\n        // If we are logged in while creating this Protocol,\n        // store this information as well\n        if (Meteor.users && Meteor.userId) {\n            this.createdBy = Meteor.userId;\n            this.modifiedBy = Meteor.userId;\n        }\n\n        // Create two empty Sets specifying which roles\n        // have read and write access to this Protocol\n        this.availableTo = new Set();\n        this.editableBy = new Set();\n\n        // Define empty arrays for the Protocol matching rules\n        // and Stages\n        this.protocolMatchingRules = [];\n        this.stages = [];\n\n        // Define auxiliary values for priors\n        this.numberOfPriorsReferenced = -1;\n    }\n\n    getNumberOfPriorsReferenced(skipCache = false) {\n        let numberOfPriorsReferenced = skipCache !== true ? this.numberOfPriorsReferenced : -1;\n\n        // Check if information is cached already\n        if (numberOfPriorsReferenced > -1) {\n            return numberOfPriorsReferenced;\n        }\n\n        numberOfPriorsReferenced = 0;\n\n        // Search each study matching rule for prior rules\n        // Each stage can have many viewports that can have\n        // multiple study matching rules.\n        this.stages.forEach(stage => {\n            if (!stage.viewports) {\n                return;\n            }\n\n            stage.viewports.forEach(viewport => {\n                if (!viewport.studyMatchingRules) {\n                    return;\n                }\n\n                viewport.studyMatchingRules.forEach(rule => {\n                    // If the current rule is not a priors rule, it will return -1 then numberOfPriorsReferenced will continue to be 0\n                    const priorsReferenced = rule.getNumberOfPriorsReferenced();\n                    if (priorsReferenced > numberOfPriorsReferenced) {\n                        numberOfPriorsReferenced = priorsReferenced;\n                    }\n                });\n            });\n        });\n\n        this.numberOfPriorsReferenced = numberOfPriorsReferenced;\n\n        return numberOfPriorsReferenced\n    }\n\n    updateNumberOfPriorsReferenced() {\n        this.getNumberOfPriorsReferenced(true);\n    }\n\n    /**\n     * Method to update the modifiedDate when the Protocol\n     * has been changed\n     */\n    protocolWasModified() {\n        // If we are logged in while modifying this Protocol,\n        // store this information as well\n        if (Meteor.users && Meteor.userId) {\n            this.modifiedBy = Meteor.userId;\n        }\n\n        // Protocol has been modified, so mark priors information\n        // as \"outdated\"\n        this.hasUpdatedPriorsInformation = false;\n\n        // Update number of priors referenced info\n        this.updateNumberOfPriorsReferenced();\n\n        // Update the modifiedDate with the current Date/Time\n        this.modifiedDate = new Date();\n    }\n\n    /**\n     * Occasionally the Protocol class needs to be instantiated from a JavaScript Object\n     * containing the Protocol data. This function fills in a Protocol with the Object\n     * data.\n     *\n     * @param input A Protocol as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the input name to the Protocol\n        this.name = input.name;\n\n        // Retrieve locked status, use !! to make it truthy\n        // so that undefined values will be set to false\n        this.locked = !!input.locked;\n\n        // TODO: Check how to regenerate Set from Object\n        //this.availableTo = new Set(input.availableTo);\n        //this.editableBy = new Set(input.editableBy);\n\n        // If the input contains Protocol matching rules\n        if (input.protocolMatchingRules) {\n            input.protocolMatchingRules.forEach(ruleObject => {\n                // Create new Rules from the stored data\n                var rule = new HP.ProtocolMatchingRule();\n                rule.fromObject(ruleObject);\n\n                // Add them to the Protocol\n                this.protocolMatchingRules.push(rule);\n            });\n        }\n\n        // If the input contains data for various Stages in the\n        // display set sequence\n        if (input.stages) {\n            input.stages.forEach(stageObject => {\n                // Create Stages from the stored data\n                var stage = new HP.Stage();\n                stage.fromObject(stageObject);\n\n                // Add them to the Protocol\n                this.stages.push(stage);\n            });\n        }\n    }\n\n    /**\n     * Creates a clone of the current Protocol with a new name\n     *\n     * @param name\n     * @returns {Protocol|*}\n     */\n    createClone(name) {\n        // Create a new JavaScript independent of the current Protocol\n        var currentProtocol = Object.assign({}, this);\n\n        // Create a new Protocol to return\n        var clonedProtocol = new HP.Protocol();\n\n        // Apply the desired properties\n        currentProtocol.id = clonedProtocol.id;\n        clonedProtocol.fromObject(currentProtocol);\n\n        // If we have specified a name, assign it\n        if (name) {\n            clonedProtocol.name = name;\n        }\n\n        // Unlock the clone\n        clonedProtocol.locked = false;\n\n        // Return the cloned Protocol\n        return clonedProtocol;\n    }\n\n    /**\n     * Adds a Stage to this Protocol's display set sequence\n     *\n     * @param stage\n     */\n    addStage(stage) {\n        this.stages.push(stage);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        this.protocolWasModified();\n    }\n\n    /**\n     * Adds a Rule to this Protocol's array of matching rules\n     *\n     * @param rule\n     */\n    addProtocolMatchingRule(rule) {\n        this.protocolMatchingRules.push(rule);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        this.protocolWasModified();\n    }\n\n    /**\n     * Removes a Rule from this Protocol's array of matching rules\n     *\n     * @param rule\n     */\n    removeProtocolMatchingRule(rule) {\n        var wasRemoved = removeFromArray(this.protocolMatchingRules, rule);\n\n        // Update the modifiedDate and User that last\n        // modified this Protocol\n        if (wasRemoved) {\n            this.protocolWasModified();\n        }\n    }\n};","import { Random } from 'meteor/random';\n\nimport { comparators } from '../lib/comparators';\n\nconst EQUALS_REGEXP = /^equals$/;\n\n/**\n * This Class represents a Rule to be evaluated given a set of attributes\n * Rules have:\n * - An attribute (e.g. 'seriesDescription')\n * - A constraint Object, in the form required by Validate.js:\n *\n * rule.constraint = {\n *   contains: {\n *      value: 'T-1'\n *      }\n *   };\n *\n *  Note: In this example we use the 'contains' Validator, which is a custom Validator defined in Viewerbase\n *\n * - A value for whether or not they are Required to be matched (default: False)\n * - A value for their relative weighting during Protocol or Image matching (default: 1)\n */\nexport class Rule {\n    /**\n     * The Constructor for the Class to create a Rule with the bare\n     * minimum information\n     *\n     * @param name The desired name for the Rule\n     */\n    constructor(attribute, constraint, required, weight) {\n        // Create a new UUID for this Rule\n        this.id = Random.id();\n\n        // Set the Rule's weight (defaults to 1)\n        this.weight = weight || 1;\n\n        // If an attribute is specified, assign it\n        if (attribute) {\n            this.attribute = attribute;\n        }\n\n        // If a constraint is specified, assign it\n        if (constraint) {\n            this.constraint = constraint;\n        }\n\n        // If a value for 'required' is specified, assign it\n        if (required === undefined) {\n            // If no value was specified, default to False\n            this.required = false;\n        } else {\n            this.required = required;\n        }\n\n        // Cache for constraint info object\n        this._constraintInfo = void 0;\n\n        // Cache for validator and value object\n        this._validatorAndValue = void 0;\n    }\n\n    /**\n     * Occasionally the Rule class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Protocol with the Object data.\n     *\n     * @param input A Rule as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the specified input data to the Rule\n        this.required = input.required;\n        this.weight = input.weight;\n        this.attribute = input.attribute;\n        this.constraint = input.constraint;\n    }\n\n    /**\n     * Get the constraint info object for the current constraint\n     * @return {Object\\undefined} Constraint object or undefined if current constraint \n     *                            is not valid or not found in comparators list\n     */\n    getConstraintInfo() {\n        let constraintInfo = this._constraintInfo;\n        // Check if info is cached already\n        if (constraintInfo !== void 0) {\n            return constraintInfo;\n        }\n\n        const ruleConstraint = Object.keys(this.constraint)[0];\n\n        if (ruleConstraint !== void 0) {\n            constraintInfo = comparators.find(comparator => ruleConstraint === comparator.id)\n        }\n\n        // Cache this information for later use\n        this._constraintInfo = constraintInfo;\n\n        return constraintInfo;\n    }\n\n     /**\n     * Check if current rule is related to priors\n     * @return {Boolean} True if a rule is related to priors or false otherwise\n     */\n    isRuleForPrior() {\n        // @TODO: Should we check this too? this.attribute === 'relativeTime'\n        return this.attribute === 'abstractPriorValue';\n    }\n\n    /**\n     * If the current rule is a rule for priors, returns the number of referenced priors. Otherwise, returns -1.\n     * @return {Number} The number of referenced priors or -1 if not applicable. Returns zero if the actual value could not be determined.\n     */\n    getNumberOfPriorsReferenced() {\n        if (!this.isRuleForPrior()) {\n            return -1;\n        }\n\n        // Get rule's validator and value\n        const ruleValidatorAndValue = this.getConstraintValidatorAndValue();\n        const { value, validator } = ruleValidatorAndValue;\n        const intValue = parseInt(value, 10) || 0; // avoid possible NaN\n\n        // \"Equal to\" validators\n        if (EQUALS_REGEXP.test(validator)) {\n            // In this case, -1 (the oldest prior) indicates that at least one study is used\n            return intValue < 0 ? 1 : intValue;\n        }\n\n        // Default cases return value\n        return 0;\n    }\n\n    /**\n     * Get the constraint validator and value\n     * @return {Object|undefined} Returns an object containing the validator and it's value or undefined\n     */\n    getConstraintValidatorAndValue() {\n        let validatorAndValue = this._validatorAndValue;\n        \n        // Check if validator and value are cached already\n        if (validatorAndValue !== void 0) {\n            return validatorAndValue;\n        }\n\n        // Get the constraint info object\n        const constraintInfo = this.getConstraintInfo();\n\n        // Constraint info object exists and is valid\n        if (constraintInfo !== void 0) {\n            const validator = constraintInfo.validator;\n            const currentValidator = this.constraint[validator];\n\n            if (currentValidator) {\n                const constraintValidator = constraintInfo.validatorOption;\n                const constraintValue = currentValidator[constraintValidator];\n\n                validatorAndValue = {\n                    value: constraintValue,\n                    validator: constraintInfo.id\n                };\n\n                this._validatorAndValue = validatorAndValue;\n            }\n        }\n\n        return validatorAndValue;\n    }\n}\n","import { Random } from 'meteor/random';\n\n/**\n * A Stage is one step in the Display Set Sequence for a Hanging Protocol\n *\n * Stages are defined as a ViewportStructure and an array of Viewports\n *\n * @type {Stage}\n */\nHP.Stage = class Stage {\n    constructor(ViewportStructure, name) {\n        // Create a new UUID for this Stage\n        this.id = Random.id();\n\n        // Assign the name and ViewportStructure provided\n        this.name = name;\n        this.viewportStructure = ViewportStructure;\n\n        // Create an empty array for the Viewports\n        this.viewports = [];\n\n        // Set the created date to Now\n        this.createdDate = new Date();\n    }\n\n    /**\n     * Creates a clone of the current Stage with a new name\n     *\n     * Note! This method absolutely cannot be renamed 'clone', because\n     * Minimongo's insert method uses 'clone' internally and this\n     * somehow causes very bizarre behaviour\n     *\n     * @param name\n     * @returns {Stage|*}\n     */\n    createClone(name) {\n        // Create a new JavaScript independent of the current Protocol\n        var currentStage = Object.assign({}, this);\n\n        // Create a new Stage to return\n        var clonedStage = new HP.Stage();\n\n        // Assign the desired properties\n        currentStage.id = clonedStage.id;\n        clonedStage.fromObject(currentStage);\n\n        // If we have specified a name, assign it\n        if (name) {\n            clonedStage.name = name;\n        }\n\n        // Return the cloned Stage\n        return clonedStage;\n    }\n\n    /**\n     * Occasionally the Stage class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Protocol with the Object data.\n     *\n     * @param input A Stage as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // Check if the input already has an ID\n        // If so, keep it. It not, create a new UUID\n        this.id = input.id || Random.id();\n\n        // Assign the input name to the Stage\n        this.name = input.name;\n\n        // If a ViewportStructure is present in the input, add it from the\n        // input data\n        this.viewportStructure = new HP.ViewportStructure();\n        this.viewportStructure.fromObject(input.viewportStructure);\n\n        // If any viewports are present in the input object\n        if (input.viewports) {\n            input.viewports.forEach(viewportObject => {\n                // Create a new Viewport with their data\n                var viewport = new HP.Viewport();\n                viewport.fromObject(viewportObject);\n\n                // Add it to the viewports array\n                this.viewports.push(viewport);\n            });\n        }\n    }\n};","// Local imports\nimport { removeFromArray } from '../lib/removeFromArray';\n\n/**\n * This Class defines a Viewport in the Hanging Protocol Stage. A Viewport contains\n * arrays of Rules that are matched in the ProtocolEngine in order to determine which\n * images should be hung.\n *\n * @type {Viewport}\n */\nHP.Viewport = class Viewport {\n    constructor() {\n        this.viewportSettings = {};\n        this.imageMatchingRules = [];\n        this.seriesMatchingRules = [];\n        this.studyMatchingRules = [];\n    }\n\n    /**\n     * Occasionally the Viewport class needs to be instantiated from a JavaScript Object.\n     * This function fills in a Viewport with the Object data.\n     *\n     * @param input The Viewport as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        // If ImageMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's imageMatchingRules array\n        if (input.imageMatchingRules) {\n            input.imageMatchingRules.forEach(ruleObject => {\n                var rule = new HP.ImageMatchingRule();\n                rule.fromObject(ruleObject);\n                this.imageMatchingRules.push(rule);\n            });\n        }\n\n        // If SeriesMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's seriesMatchingRules array\n        if (input.seriesMatchingRules) {\n            input.seriesMatchingRules.forEach(ruleObject => {\n                var rule = new HP.SeriesMatchingRule();\n                rule.fromObject(ruleObject);\n                this.seriesMatchingRules.push(rule);\n            });\n        }\n\n        // If StudyMatchingRules exist, create them from the Object data\n        // and add them to the Viewport's studyMatchingRules array\n        if (input.studyMatchingRules) {\n            input.studyMatchingRules.forEach(ruleObject => {\n                var rule = new HP.StudyMatchingRule();\n                rule.fromObject(ruleObject);\n                this.studyMatchingRules.push(rule);\n            });\n        }\n\n        // If ViewportSettings exist, add them to the current protocol\n        if (input.viewportSettings) {\n            this.viewportSettings = input.viewportSettings;\n        }\n    }\n\n    /**\n     * Finds and removes a rule from whichever array it exists in.\n     * It is not required to specify if it exists in studyMatchingRules,\n     * seriesMatchingRules, or imageMatchingRules\n     *\n     * @param rule\n     */\n    removeRule(rule) {\n        var array;\n        if (rule instanceof HP.StudyMatchingRule) {\n            array = this.studyMatchingRules;\n        } else if (rule instanceof HP.SeriesMatchingRule) {\n            array = this.seriesMatchingRules;\n        } else if (rule instanceof HP.ImageMatchingRule) {\n            array = this.imageMatchingRules;\n        }\n\n        removeFromArray(array, rule);\n    }\n};","/**\n * The ViewportStructure class represents the layout and layout properties that\n * Viewports are displayed in. ViewportStructure has a type, which corresponds to\n * a layout template, and a set of properties, which depend on the type.\n *\n * @type {ViewportStructure}\n */\nHP.ViewportStructure = class ViewportStructure {\n    constructor(type, properties) {\n        this.type = type;\n        this.properties = properties;\n    }\n\n    /**\n     * Occasionally the ViewportStructure class needs to be instantiated from a JavaScript Object.\n     * This function fills in a ViewportStructure with the Object data.\n     *\n     * @param input The ViewportStructure as a JavaScript Object, e.g. retrieved from MongoDB or JSON\n     */\n    fromObject(input) {\n        this.type = input.type;\n        this.properties = input.properties;\n    }\n\n    /**\n     * Retrieve the layout template name based on the layout type\n     *\n     * @returns {string}\n     */\n    getLayoutTemplateName() {\n        // Viewport structure can be updated later when we build more complex display layouts\n        switch (this.type) {\n            case 'grid':\n                return 'gridLayout';\n        }\n    }\n\n    /**\n     * Retrieve the number of Viewports required for this layout\n     * given the layout type and properties\n     *\n     * @returns {string}\n     */\n    getNumViewports() {\n        // Viewport structure can be updated later when we build more complex display layouts\n        switch (this.type) {\n            case 'grid':\n                // For the typical grid layout, we only need to multiply rows by columns to\n                // obtain the number of viewports\n                return this.properties.rows * this.properties.columns;\n        }   \n    }\n};","import { Rule } from '../Rule';\n\n/**\n * The ImageMatchingRule class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ImageMatchingRule}\n */\nHP.ImageMatchingRule = class ImageMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The ProtocolMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {ProtocolMatchingRule}\n */\nHP.ProtocolMatchingRule = class ProtocolMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The SeriesMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {SeriesMatchingRule}\n */\nHP.SeriesMatchingRule = class SeriesMatchingRule extends Rule {};","import { Rule } from '../Rule';\n\n/**\n * The StudyMatchingRule Class extends the Rule Class.\n *\n * At present it does not add any new methods or attributes\n * @type {StudyMatchingRule}\n */\nHP.StudyMatchingRule = class StudyMatchingRule extends Rule {};\n","const comparators = [{\n    id: 'equals',\n    name: '= (Equals)',\n    validator: 'equals',\n    validatorOption: 'value',\n    description: 'The attribute must equal this value.'\n}, {\n    id: 'doesNotEqual',\n    name: '!= (Does not equal)',\n    validator: 'doesNotEqual',\n    validatorOption: 'value',\n    description: 'The attribute must not equal this value.'\n}, {\n    id: 'contains',\n    name: 'Contains',\n    validator: 'contains',\n    validatorOption: 'value',\n    description: 'The attribute must contain this value.'\n}, {\n    id: 'doesNotContain',\n    name: 'Does not contain',\n    validator: 'doesNotContain',\n    validatorOption: 'value',\n    description: 'The attribute must not contain this value.'\n}, {\n    id: 'onlyInteger',\n    name: 'Only Integers',\n    validator: 'numericality',\n    validatorOption: 'onlyInteger',\n    description: \"Real numbers won't be allowed.\"\n}, {\n    id: 'greaterThan',\n    name: '> (Greater than)',\n    validator: 'numericality',\n    validatorOption: 'greaterThan',\n    description: 'The attribute has to be greater than this value.'\n}, {\n    id: 'greaterThanOrEqualTo',\n    name: '>= (Greater than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'greaterThanOrEqualTo',\n    description: 'The attribute has to be at least this value.'\n}, {\n    id: 'lessThanOrEqualTo',\n    name: '<= (Less than or equal to)',\n    validator: 'numericality',\n    validatorOption: 'lessThanOrEqualTo',\n    description: 'The attribute can be this value at the most.'\n}, {\n    id: 'lessThan',\n    name: '< (Less than)',\n    validator: 'numericality',\n    validatorOption: 'lessThan',\n    description: 'The attribute has to be less than this value.'\n}, {\n    id: 'odd',\n    name: 'Odd',\n    validator: 'numericality',\n    validatorOption: 'odd',\n    description: 'The attribute has to be odd.'\n}, {\n    id: 'even',\n    name: 'Even',\n    validator: 'numericality',\n    validatorOption: 'even',\n    description: 'The attribute has to be even.'\n}];\n\n// Immutable object\nObject.freeze(comparators);\n\nexport { comparators }","import { _ } from 'meteor/underscore';\n\n/**\n * Removes the first instance of an element from an array, if an equal value exists\n *\n * @param array\n * @param input\n *\n * @returns {boolean} Whether or not the element was found and removed\n */\nconst removeFromArray = (array, input) => {\n    // If the array is empty, stop here\n    if (!array ||\n        !array.length) {\n        return false;\n    }\n\n    array.forEach((value, index) => {\n        if (_.isEqual(value, input)) {\n            indexToRemove = index;\n            return false;\n        }\n    });\n\n    if (indexToRemove === void 0) {\n        return false;\n    }\n\n    array.splice(indexToRemove, 1);\n    return true;\n};\n\nexport { removeFromArray };","Meteor.publish('hangingprotocols', function() {\n    // TODO: filter by availableTo user\n    return HangingProtocols.find();\n});\n"]}